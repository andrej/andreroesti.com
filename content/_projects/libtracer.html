---
title: libtracer, a C++ library for ptrace
tagline: A lightweight idiomatic wrapper around Linux ptrace
do_link: true
date: 2022-09-01
---

<h2 class="section-title">libtracer</h2>
<h3>A lightweight idiomatic C++ wrapper around Linux ptrace</h3>

<p>libtracer library is a by-product of my research into MVEEs. It reduces the number of lines of boilerplate code required to use ptrace, abstracts away architecture-specific idiosyncracies, provides a clean C++ object-based interface with exceptions for error handling, and adds some commonly used functionality not native to ptrace (such as identifying system call numbers and names).</p>

<p>libtracer makes using ptrace as simple as this:</p>

{% highlight c++ %}
{% raw %}
#include <iostream>
#include "tracer.hpp"

tracer the_tracer;

int main(int argc, char **argv) {
	if(the_tracer.fork() == 0) {
		std::cout << "Hello, World!";
	} else {
		while(the_tracer.resume_and_wait(stop_reason::SYSCALL_ENTRY)) {
			std::cout << the_tracer.get_syscall_name() << "\n";
		}
	}
}
{% endraw %}
{% endhighlight %}

<p>This will print the name of all the system calls executed in the child process, something like:</p>

<pre>
fstat
write
Hello, World!
exit_group
</pre>
	
The library is available on <a href="https://github.com/andrej/tracer">{%- include icon.html icon='github.svg' %} <strong>GitHub</strong></a>, where documentation and installation instructions can also be found.
